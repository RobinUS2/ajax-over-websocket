<html>
	<head>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="../aow.js"></script>
		<script type="text/javascript">
			var aowEnabled = true;
			$.ajaxOverWebsocket({
				enabled: aowEnabled,
				/*methods: ['GET'],*/
			});
			var myTime = function() {
				return window.performance.now();
			};
			var update = function() {
				var startTime = myTime();
				$.get('response.json', function(resp) {
					var finishTime = myTime();
					var latency = finishTime - startTime;
					console.log('end user latency ' + latency);
					console.log('get', resp);
				});
			};
			update(); // Immediate to test behavior during connect
			setInterval(function() {
				update();
			}, 500);

			setTimeout(function() {
				// Simple get
				$.get('response.json');

				// Relative path
				$.get('../examples/response.json');

				// Simple post
				$.post('response.json', { key : 'value' });

				// Custom headers
				$.ajax({
				    url: 'response.json',
				    headers: { 'x-my-custom-header': 'some value' }
				});

				// Before send
				$.ajax({
				    url: 'response.json',
				    beforeSend: function() {
				    	console.log('user defined before send');
				    },
				    success: function(data, textStatus, xhr) {
				    	console.log('ajax success', data, textStatus, xhr);
				    },
				    complete: function(xhr, textStatus) {
				    	console.log('ajax complete', textStatus, xhr);
				    }
				});

				// Get JSON
				$.getJSON('response.json', function(resp, status, xhr) {
					console.log('json', resp, status, xhr);
				});
			}, 1000);
		</script>
	</head>
	<body>
		
	</body>
</html>